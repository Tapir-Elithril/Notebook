# 课程综合实践II（数据要素交易基础）
## HW2:机制设计与信息设计基础
### 2.1 $N$人一价拍卖均衡
**假设有$N$个竞拍者，并且$N$个竞拍者的估值都是独立的，且都服从$[0,1]$上的均匀分布。$N$个竞拍者的真真实值记为$t_1,...,t_n$。**
1.求解博弈的递增对称纯策略贝叶斯纳什均衡$\beta$（注意$\beta(0)=0$）；
2.从上述结果中你能获得什么启示？

[Answer]
1.竞拍者的出价策略都是当自己的估值为$t_i$时出价$\beta(t_i)$，其中$\beta$是单调不减的，$\beta(0)=0$
当竞拍者$i$报价$b_i$，其余竞拍者报价$\beta(t_1),...,\beta(t_{i-1}),\beta(t_{i+1}),...,\beta(t_N)$时，竞拍者$i$的效用为：
$$
(t_i-b_i)\mathbb{P}(b_i>max_{j\in N-\left\{i\right\}}\beta(t_j))=(t_i-b_i)\cdot (\beta^{-1}(b_i))^{N-1}
$$
对$b_i$求导有取极大值的必要条件为
$$
-(\beta^{-1}(b_i))^{N-1}+(t_i-b_i)\cdot(N-1)(\beta^{-1}(b_i))^{N-2}\cdot \frac{1}{\beta'(\beta^{-1}(b_i))}=0
$$
已知考虑对称均衡，故均衡时$b_i=\beta(t_i)$，代入上式有
$$
t_i^{N-1}\beta'(t_i)=(t_i-\beta(t_i))\cdot(N-1)t_i^{N-2}
$$
上式对任意$t_i$成立
$$
(t^{N-1}\beta(t))'=(N-1)t_i^{N-1}
$$
两边从0到$t_i$积分（注意$\beta(0)=0$），解得$\beta(t_i)=\frac{N-1}{N}t_i$
对$b_i$求二阶导非负（省略），验证该博弈的递增对称纯策略贝叶斯纳什均衡$\beta(t_i)=\frac{N-1}{N}t_i$
2.上述结果表明，人数越多（$N$越大），竞拍者更倾向于提高自己的报价（使报价更接近真实估值），这是符合直觉的，因为随着竞争人数的增加，竞争更激烈，竞拍者倾向于理性地提高报价降低期望收益以期望在激烈的竞争中胜出（竞拍者希望优先获得收益以避免0收益而非追求更大的收益）。但均衡报价始终小于估价，不然竞拍者无法取得正收益。

### 2.2 收入等价原理
**有$N$个竞拍者，并且$N$个竞拍者的估值是独立的，且都服从$[0,1]$上的均匀分布。考虑如下规则的支付拍卖：每个竞拍者提交一个报价，报价最高的竞拍者赢得物品。但所有竞拍者无论是否获得物品都要支付自己的报价。注意，以下只考虑估价为$0$的竞拍者的期望支付为$0$的递增对称均衡**
1.求2.1题的均衡下估值为$x$的竞拍者的均衡期望支付$m(x)$；
2.求2.1题的均衡下卖家的期望收入；
3.根据收入等价原理证明：全支付拍卖的递增对称均衡就是$\beta(x)=m(x)$。

[Answer]
1.由2.1知，$N$人一价拍卖的均衡是$\beta(t_i)=\frac{N-1}{N}t_i$，其期望支付为
$$
m(x)=\mathbb{P}(win)\cdot \beta(x)+\mathbb{P}(lose)\cdot 0=\frac{N-1}{N}x^{N}
$$
2.卖家的期望收入是$N$个参与人的期望支付之和，即
$$
N\cdot\mathbb{E}(m(x))=N\cdot\int_0^1\frac{N-1}{N}x^Ndx=\frac{N-1}{N+1}
$$
3.全支付拍卖与$N$人一价拍卖满足：竞拍者估价独立同分布，估价为$0$的参与人期望支付为$0$，拍卖规则为报价最高者得到物品。根据收入等价原理，拍卖的递增对称均衡都会使卖家获得相等的期望收入（即$\frac{N-1}{N+1}$），也即全支付拍卖与$N$人一价拍卖有相同的均衡期望支付$m(x)$，而全支付拍卖的期望支付为（无论输赢都需要支付报价）
$$
m(x)=\mathbb{P}(win)\cdot \beta(x)+\mathbb{P}(lose)\cdot \beta(x)=\beta(x)
$$
所以全支付拍卖的递增对称均衡$\beta(x)$就是$N$人一价拍卖的均衡期望支付$m(x)$
**以下给出了验证:**
竞拍者的出价策略都是当自己的估值为$t_i$时出价$\beta(t_i)$，其中$\beta$是单调不减的，$\beta(0)=0$
当竞拍者$i$报价$b_i$，其余竞拍者报价$\beta(t_1),...,\beta(t_{i-1}),\beta(t_{i+1}),...,\beta(t_N)$时，竞拍者$i$的效用为：
$$
\begin{aligned}
&(t_i-b_i)\mathbb{P}(b_i>max_{j\in N-\left\{i\right\}}\beta(t_j))-b_i\mathbb{P}(b_i<max_{j\in N-\left\{i\right\}}\beta(t_j)) \\
&\quad=(t_i-b_i)\cdot (\beta^{-1}(b_i))^{N-1}-b_i\cdot (1-\beta^{-1}(b_i)^{N-1}) \\
&\quad=t_i\cdot (\beta^{-1}(b_i))^{N-1}-b_i
\end{aligned}
$$
对$b_i$求导有取极大值的必要条件为
$$
t_i\cdot(N-1)(\beta^{-1}(b_i))^{N-2}\cdot\frac{1}{\beta'(\beta^{-1}(b_i))}=1
$$
已知考虑对称均衡，故均衡时$b_i=\beta(t_i)$，代入上式有
$$
(N-1)t_i^{N-1}=\beta'(t_i)
$$
两边从0到$t_i$积分（注意$\beta(0)=0$），解得$\beta(t_i)=\frac{N-1}{N}t_i^N$
对$b_i$求二阶导非负（省略），验证该博弈的递增对称纯策略贝叶斯纳什均衡$\beta(t_i)=\frac{N-1}{N}t_i^N=m(t_i)$
从而验证了$\beta(x)=m(x)$

### 2.3 反向拍卖的迈尔森引理
**在反向拍卖中，买家作为拍卖师通常具有一些采购需求，竞拍者是待采购产品的卖家。每位竞拍者$i$报出自己产品的成本$c_i$，买家收到所有竞拍者报告的成本向量后决定分配规则$\boldsymbol{x}$和支付规则$\boldsymbol{p}$，其中$x_i(c_i)$表示竞拍者$ i $报告成本$ c_i $时购买竞拍者$ i $产品的概率，$p_i(c_i)$表示竞拍者$ i $报告成本$c_i$且竞拍者$ i $的产品被购买时给竞拍者$ i $的支付。**
**假设竞拍者的产品没有被卖出时的效用为$ 0$，因此竞拍者$ i $报出任意的$ c'_i $时的期望效用可以表达为**
$$
u_i(c'_i)=x_i(c'_i)\cdot (p_i(c'_i)-c_i).
$$
1.根据 DSIC 的定义写出反向拍卖机制$(\boldsymbol{x},\boldsymbol{p})$满足 DSIC 时竞拍者效用应当满足的条件；
2.根据课上给出的迈尔森引理，给出并证明反向拍卖机制是 DSIC 的充要条件（假设$ c \rightarrow \infty $时，$c\cdot x_i(c) \rightarrow 0$且$p_i(c)\cdot x_i(c)\rightarrow 0$）。
[Answer]
1.反向拍卖机制$(\boldsymbol{x},\boldsymbol{p})$满足 DSIC 时，每个参与人如实报告自己的成本$c_i$构成的行动向量$\boldsymbol{s}$是占优策略均衡，即
$$
\forall i\in N,\forall c_i'\neq c_i,u_i(c_i)\ge u_i(c_i') 
$$
2.根据迈尔森引理，反向拍卖机制是 DSIC 的充要条件是：$(\boldsymbol{x},\boldsymbol{p})$满足(1)$\boldsymbol{x}$是单调不减的，(2)给定$\boldsymbol{x}$的情况下，只要给定$p(0)$的值，对任意的$i\in N$和$b_i \in [0,+\infty)$，$\boldsymbol{p}$的表达式是唯一确定的：
$$
p_i(b_i)=p_i(0)+b_i\cdot x_i(b_i)-\int_0^{b_i}x_i(s)ds.
$$
下面给出证明：
充分性：
设竞拍者$i$的成本为$c_i$，当其报价为$c'_i$时，其收益为
$$
u_i(c'_i)=x_i(c'_i)\cdot (p_i(c'_i)-c_i)=代入迈尔森公式
$$

必要性：
积分到无穷大

### 2.4 虚拟估值和正则性条件